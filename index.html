<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IOC Điều Hành KH&CN Tây Ninh - Chuẩn hóa 84 Nhiệm Vụ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700;800;900&display=swap');
        
        :root {
            --primary: #1E40AF; 
            --bg-page: #F8FAFC;
            --bg-sidebar: #020617; 
            --sidebar-text: #94A3B8;
            --sidebar-active-bg: #1E40AF;
            --text-main: #0F172A;
            --border: #CBD5E1;
        }

        body {
            background-color: var(--bg-page);
            color: var(--text-main);
            font-family: 'Lexend', sans-serif;
            overflow: hidden;
        }

        .sidebar { width: 260px; background: var(--bg-sidebar); color: var(--sidebar-text); }

        .menu-item {
            padding: 10px 20px;
            margin: 4px 16px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .active-item { 
            background: var(--sidebar-active-bg) !important; 
            color: white !important; 
            box-shadow: 0 4px 15px rgba(30, 64, 175, 0.4);
        }

        .compact-card {
            background: #FFFFFF;
            border: 1px solid var(--border);
            padding: 12px 16px;
            border-radius: 12px;
        }

        .card-total { background: linear-gradient(135deg, #1E40AF, #1E3A8A); color: white; border: none; }

        .task-table-container { background: #FFFFFF; border: 1px solid var(--border); border-radius: 12px; }

        thead.sticky th {
            color: white;
            font-weight: 800;
            background-color: #1e293b;
            text-transform: uppercase;
            font-size: 9.5px;
            padding: 12px 10px;
            letter-spacing: 0.05em;
        }

        .task-row td {
            font-size: 11px; 
            padding: 8px 10px;
            line-height: 1.4;
            border-bottom: 1px solid #f1f5f9;
        }

        .row-color-0 { color: #1e293b; }
        .row-color-1 { color: #1e40af; }
        .row-color-2 { color: #0369a1; }
        .row-color-3 { color: #4338ca; }
        .row-color-4 { color: #0f172a; }

        .task-row:hover { background-color: #f1f5f9; }

        .badge-step { padding: 4px 6px; border-radius: 4px; font-size: 8px; font-weight: 800; display: inline-block; width: 65px; }
        .badge-in-progress { background: #E0F2FE; color: #0369A1; border: 1px solid #BAe6FD; }
        .badge-done { background: #D1FAE5; color: #065F46; border: 1px solid #A7F3D0; }

        .tag { padding: 2px 5px; border-radius: 4px; font-size: 8.5px; font-weight: 800; }

        .custom-scroll::-webkit-scrollbar { width: 5px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="flex h-screen">

    <aside class="sidebar flex flex-col shrink-0">
        <div class="p-6">
            <h1 class="text-2xl font-black italic text-white">IOC <span class="text-blue-500">2026</span></h1>
            <p class="text-[10px] font-black text-blue-400 uppercase tracking-widest mt-1">Sở KH&CN Tây Ninh</p>
        </div>

        <nav class="flex-1 space-y-1 overflow-y-auto custom-scroll">
            <button onclick="switchMode('ALL', this)" class="menu-item w-[calc(100%-32px)] active-item">Tất cả nhiệm vụ (84)</button>
            <button onclick="switchMode('TU', this)" class="menu-item w-[calc(100%-32px)]">Tỉnh ủy giao (12)</button>
            <button onclick="switchMode('UB', this)" class="menu-item w-[calc(100%-32px)]">UBND Tỉnh giao (14)</button>
            <button onclick="switchMode('NQ24', this)" class="menu-item w-[calc(100%-32px)]">Nghị quyết 24 (18)</button>
            <button onclick="switchMode('SO', this)" class="menu-item w-[calc(100%-32px)]">Chuyên môn Sở (40)</button>
        </nav>
        
        <div class="p-4 border-t border-slate-800">
            <div id="miniClock" class="text-xl font-bold font-mono text-blue-500 text-center">00:00:00</div>
        </div>
    </aside>

    <main class="flex-1 flex flex-col overflow-hidden">
        <!-- Stats Bar -->
        <div class="p-4 grid grid-cols-12 gap-4 border-b border-slate-200 bg-white z-20">
            <div class="col-span-9 grid grid-cols-4 gap-4">
                <div class="compact-card card-total">
                    <div class="text-[9px] font-bold opacity-80 uppercase">Tổng số</div>
                    <div id="stat-total" class="text-2xl font-black">84</div>
                </div>
                <div class="compact-card border-l-4 border-amber-500">
                    <div class="text-[9px] font-bold text-slate-400 uppercase">Chưa xong</div>
                    <div id="stat-pending" class="text-2xl font-black text-amber-600">0</div>
                </div>
                <div class="compact-card border-l-4 border-emerald-500">
                    <div class="text-[9px] font-bold text-slate-400 uppercase">Đã xong</div>
                    <div id="stat-done" class="text-2xl font-black text-emerald-600">0</div>
                </div>
                <div class="compact-card border-l-4 border-blue-500">
                    <div class="text-[9px] font-bold text-slate-400 uppercase">Tỉ lệ (%)</div>
                    <div id="stat-percent" class="text-2xl font-black text-blue-700">0%</div>
                </div>
            </div>
            <div class="col-span-3 flex flex-col justify-center px-4 bg-blue-50 rounded-xl border border-blue-100">
                <div class="text-[9px] font-black text-blue-400 uppercase">Đang xem nhóm</div>
                <div id="currentCategoryLabel" class="text-sm font-bold text-blue-900 truncate uppercase">TẤT CẢ</div>
            </div>
        </div>

        <div class="flex-1 overflow-hidden flex flex-col p-4 gap-4 bg-slate-50">
            <div class="flex gap-3 shrink-0">
                <input type="text" id="search" placeholder="Tìm tên nhiệm vụ..." 
                       class="flex-1 h-9 px-4 rounded-xl text-xs font-semibold border border-slate-300 outline-none focus:ring-2 focus:ring-blue-500">
                <select id="unit" class="h-9 px-4 rounded-xl text-[10px] font-bold uppercase border border-slate-300 bg-white">
                    <option value="all">Tất cả Đơn vị</option>
                </select>
            </div>

            <div class="flex-1 overflow-y-auto custom-scroll task-table-container shadow-sm">
                <table class="w-full border-collapse table-fixed">
                    <thead class="sticky top-0 z-10">
                        <tr class="text-left">
                            <th class="p-2 w-8 text-center">#</th>
                            <th class="p-2 w-auto">Nội dung nhiệm vụ (Phần chính)</th>
                            <th class="p-2 w-20">Tham mưu</th> 
                            <th class="p-2 w-14 text-center">Hạn</th> 
                            <th class="p-2 w-32">Tiến độ điều hành</th> 
                            <th class="p-2 w-20 text-center">Trạng thái</th>
                        </tr>
                    </thead>
                    <tbody id="taskTable"></tbody>
                </table>
            </div>
        </div>
    </main>

    <script>
        const steps = [
            "1. Đang soạn thảo",
            "2. Lấy ý kiến các phòng",
            "3. Trưởng phòng duyệt",
            "4. Lãnh đạo Sở duyệt",
            "5. Lấy ý kiến Sở Ngành",
            "6. Tổng hợp ý kiến",
            "7. Trình UBND Tỉnh",
            "8. Chờ VP UBND phản hồi",
            "9. Đã hoàn thành"
        ];

        const rawTasks = [
            // --- TỈNH ỦY GIAO (12 NHIỆM VỤ - Từ Chương trình 25 & 33) ---
            {id:"TU-01", cat:"TU", g:"CN&ĐMST", t:"Kế hoạch thực hiện Chiến lược phát triển KH,CN & ĐMST đến năm 2030 (Quyết định 569/QĐ-TTg)", d:"31/01/26"},
            {id:"TU-02", cat:"TU", g:"CN&ĐMST", t:"Nghị quyết của Tỉnh ủy về đột phá phát triển KHCN, ĐMST và chuyển đổi số; gắn với chuyển đổi xanh, kinh tế tuần hoàn", d:"31/01/26"},
            {id:"TU-03", cat:"TU", g:"Văn phòng", t:"Tổ chức triển khai các Chương trình, Kế hoạch thực hiện Nghị quyết số 57-NQ/TW của Bộ Chính trị về trí thức", d:"Thường xuyên"},
            {id:"TU-04", cat:"TU", g:"Văn phòng", t:"Đẩy mạnh chuyển đổi số trong hoạt động của các cơ quan, đơn vị, địa phương; hạ tầng CNTT; nhân lực số", d:"Quý I/2026"},
            {id:"TU-05", cat:"TU", g:"QLKH", t:"Tích hợp nội dung KHCN, ĐMST, CĐS vào công tác quy hoạch, kế hoạch, đề án và đầu tư công của tỉnh", d:"Quý I/2026"},
            {id:"TU-06", cat:"TU", g:"CN&ĐMST", t:"Thúc đẩy ứng dụng KHCN, ĐMST, CĐS và chuyển đổi xanh trong khu vực kinh tế tư nhân", d:"Thường xuyên"},
            {id:"TU-07", cat:"TU", g:"Văn phòng", t:"Kế hoạch xây dựng, phát triển đội ngũ cán bộ KHCN đáp ứng yêu cầu thực hiện Nghị quyết số 57-NQ/TW", d:"11/2026"},
            {id:"TU-08", cat:"TU", g:"CN&ĐMST", t:"Đề án thu hút nhà đầu tư chiến lược vào các ngành công nghệ cao, các lĩnh vực trọng điểm đến năm 2030", d:"06/2026"},
            {id:"TU-09", cat:"TU", g:"QLKH", t:"Chương trình phát triển nông nghiệp ứng dụng công nghệ cao gắn với tái cơ cấu ngành nông nghiệp", d:"10/2026"},
            {id:"TU-10", cat:"TU", g:"QLKH", t:"Tham mưu ý kiến Đề án đầu tư nâng cao năng lực Trạm nghiên cứu ứng dụng KH&CN Đồng Tháp Mười (2025-2030)", d:"07/2026"},
            {id:"TU-11", cat:"TU", g:"Văn phòng", t:"Nâng cao các chỉ số năng lực cạnh tranh PCI, chỉ số hiệu quả quản trị PAPI, chỉ số CCHC PAR INDEX", d:"Thường xuyên"},
            {id:"TU-12", cat:"TU", g:"Văn phòng", t:"Rà soát, điều chỉnh Nghị quyết, Chương trình hành động phục vụ Đại hội XIV Đảng bộ tỉnh", d:"31/03/26"},

            // --- UBND TỈNH GIAO (14 NHIỆM VỤ) ---
            {id:"UB-01", cat:"UB", g:"CN&ĐMST", t:"Xây dựng Đề án thành lập Trung tâm Đổi mới sáng tạo tỉnh Tây Ninh", d:"30/03/26"},
            {id:"UB-02", cat:"UB", g:"CN&ĐMST", t:"Kế hoạch triển khai phát triển tài sản trí tuệ tỉnh năm 2026", d:"30/03/26"},
            {id:"UB-03", cat:"UB", g:"CN&ĐMST", t:"Xây dựng mô hình đổi mới sáng tạo gắn với doanh nghiệp, có khả năng nhân rộng địa phương", d:"30/03/26"},
            {id:"UB-04", cat:"UB", g:"CN&ĐMST", t:"Nghiên cứu xây dựng Đề án thành lập Quỹ phát triển khoa học, công nghệ và đổi mới sáng tạo tỉnh", d:"30/06/26"},
            {id:"UB-05", cat:"UB", g:"CN&ĐMST", t:"Đẩy mạnh bảo hộ và khai thác tài sản trí tuệ từ kết quả nghiên cứu khoa học nguồn ngân sách", d:"Thường xuyên"},
            {id:"UB-06", cat:"UB", g:"QLKH", t:"Rà soát, nâng cấp và liên thông hạ tầng phòng thí nghiệm, trung tâm nghiên cứu phát triển", d:"Thường xuyên"},
            {id:"UB-07", cat:"UB", g:"Văn phòng", t:"Tổ chức các hội thảo, hội nghị chuyên đề KHCN & ĐMST phục vụ phát triển kinh tế địa phương", d:"Thường xuyên"},
            {id:"UB-08", cat:"UB", g:"CN&ĐMST", t:"Triển khai nâng cao chất lượng kết nối số, ưu tiên các vùng khó khăn, vùng biên giới", d:"Thường xuyên"},
            {id:"UB-09", cat:"UB", g:"CN&ĐMST", t:"Rà soát, cập nhật Kế hoạch phát triển hạ tầng số, mạng 5G, IoT trong các KCN, CCN", d:"Quý IV/2026"},
            {id:"UB-10", cat:"UB", g:"Văn phòng", t:"Khai thác hiệu quả hạ tầng số dùng chung cấp quốc gia và nền tảng số của tỉnh", d:"Thường xuyên"},
            {id:"UB-11", cat:"UB", g:"TĐLCL", t:"Kế hoạch nâng cao năng suất chất lượng sản phẩm, hàng hóa trên nền tảng KHCN & ĐMST", d:"Quý II/2026"},
            {id:"UB-12", cat:"UB", g:"TĐLCL", t:"Xây dựng và hoàn thiện cơ sở dữ liệu về tiêu chuẩn, quy chuẩn kỹ thuật địa phương", d:"30/09/26"},
            {id:"UB-13", cat:"UB", g:"CN&ĐMST", t:"Hỗ trợ doanh nghiệp chuyển đổi số và áp dụng các tiêu chuẩn quản lý quốc tế", d:"Thường xuyên"},
            {id:"UB-14", cat:"UB", g:"Văn phòng", t:"Báo cáo định kỳ kết quả thực hiện chỉ tiêu KHCN và ĐMST phục vụ điều hành UBND tỉnh", d:"Hàng tháng"},

            // --- NGHỊ QUYẾT 24 (18 NHIỆM VỤ) ---
            {id:"NQ-01", cat:"NQ24", g:"QLKH", t:"Phối hợp triển khai nhiệm vụ KHCN gắn với định hướng phát triển vùng và địa phương", d:"2025-2030"},
            {id:"NQ-02", cat:"NQ24", g:"CN&ĐMST", t:"Phát triển thị trường KH&CN và mạng lưới các tổ chức trung gian chuyển giao", d:"2025-2030"},
            {id:"NQ-03", cat:"NQ24", g:"CN&ĐMST", t:"Cơ chế hỗ trợ doanh nghiệp KHCN, doanh nghiệp ĐMST và khởi nghiệp sáng tạo", d:"2025-2030"},
            {id:"NQ-04", cat:"NQ24", g:"CN&ĐMST", t:"Phát triển tổ chức trung gian, trung tâm hỗ trợ chuyển giao công nghệ tại các vùng kinh tế", d:"2026-2030"},
            {id:"NQ-05", cat:"NQ24", g:"CN&ĐMST", t:"Hạ tầng dữ liệu, mạng lưới chuyên gia và hệ thống thông tin KHCN mở của tỉnh", d:"2025-2027"},
            {id:"NQ-06", cat:"NQ24", g:"CN&ĐMST", t:"Xây dựng và vận hành hệ sinh thái khởi nghiệp đổi mới sáng tạo tỉnh Tây Ninh", d:"2025-2030"},
            {id:"NQ-07", cat:"NQ24", g:"CN&ĐMST", t:"Liên kết viện, trường, doanh nghiệp trong nghiên cứu, ứng dụng và thương mại hóa kết quả", d:"2025-2030"},
            {id:"NQ-08", cat:"NQ24", g:"CN&ĐMST", t:"Đầu tư phát triển hạ tầng KHCN, phòng thí nghiệm trọng điểm cấp tỉnh", d:"2026-2030"},
            {id:"NQ-09", cat:"NQ24", g:"CN&ĐMST", t:"Xây dựng CSDL đổi mới sáng tạo liên thông cấp tỉnh và quốc gia", d:"2026-2028"},
            {id:"NQ-10", cat:"NQ24", g:"CN&ĐMST", t:"Xây dựng, hoàn thiện chính quyền số và hệ thống dịch vụ công ngành KHCN", d:"2025-2030"},
            {id:"NQ-11", cat:"NQ24", g:"CN&ĐMST", t:"Phát triển nền tảng số và dữ liệu số dùng chung cho toàn ngành", d:"2025-2030"},
            {id:"NQ-12", cat:"NQ24", g:"CN&ĐMST", t:"Nền tảng số tích hợp, chia sẻ dữ liệu (LGSP) liên thông các sở ngành", d:"2025-2027"},
            {id:"NQ-13", cat:"NQ24", g:"CN&ĐMST", t:"Ứng dụng công nghệ mới (AI, Blockchain, Cloud) trong quản lý nhà nước", d:"2026-2030"},
            {id:"NQ-14", cat:"NQ24", g:"CN&ĐMST", t:"Dữ liệu mở và kho dữ liệu dùng chung ngành KHCN phục vụ chuyển đổi số", d:"2025-2027"},
            {id:"NQ-15", cat:"NQ24", g:"CN&ĐMST", t:"Thúc đẩy kinh tế số và thương mại điện tử dựa trên năng lực KHCN", d:"2025-2030"},
            {id:"NQ-16", cat:"NQ24", g:"Văn phòng", t:"Đào tạo nguồn nhân lực số và kỹ năng số cho cán bộ, công chức ngành KHCN", d:"2025-2030"},
            {id:"NQ-17", cat:"NQ24", g:"CN&ĐMST", t:"Đảm bảo an toàn thông tin mạng, an ninh dữ liệu số và bảo mật thông tin", d:"2025-2030"},
            {id:"NQ-18", cat:"NQ24", g:"Văn phòng", t:"Tuyên truyền, nâng cao nhận thức cộng đồng về chuyển đổi số và đổi mới sáng tạo", d:"Thường xuyên"},

            // --- CHUYÊN MÔN SỞ (40 NHIỆM VỤ - Từ Danh mục 40 NV) ---
            {id:"SO-01", cat:"SO", g:"TĐLCL", t:"Tham mưu xây dựng Chương trình hành động thực hiện Chỉ thị số 38-CT/TW của Ban Bí thư", d:"31/01/26"},
            {id:"SO-02", cat:"SO", g:"TC-KH", t:"Báo cáo nhu cầu vốn KHCN, ĐMST, CĐS (2026-2030) gửi Bộ Tài chính", d:"05/02/26"},
            {id:"SO-03", cat:"SO", g:"Văn phòng", t:"Góp ý dự thảo Kế hoạch của UBND tỉnh về kiểm tra công vụ năm 2026", d:"06/02/26"},
            {id:"SO-04", cat:"SO", g:"Văn phòng", t:"Tổng hợp báo cáo kết quả thực hiện quy chế dân chủ tại cơ sở năm 2025", d:"08/02/26"},
            {id:"SO-05", cat:"SO", g:"Văn phòng", t:"Tham mưu báo cáo công tác phòng, chống tham nhũng, tiêu cực định kỳ Quý I/2026", d:"10/02/26"},
            {id:"SO-06", cat:"SO", g:"Văn phòng", t:"Thực hiện công tác tiếp công dân, giải quyết khiếu nại tố cáo (Thay Thanh tra)", d:"Thường xuyên"},
            {id:"SO-07", cat:"SO", g:"CN&ĐMST", t:"Dự thảo Kế hoạch họp mặt doanh nghiệp KHCN nhân ngày 18/5", d:"12/02/26"},
            {id:"SO-08", cat:"SO", g:"Văn phòng", t:"Dự thảo báo cáo sơ kết công tác cải cách hành chính Quý I/2026", d:"15/02/26"},
            {id:"SO-09", cat:"SO", g:"Văn phòng", t:"Báo cáo tình hình thực hiện Nghị quyết 01/NQ-CP của Chính phủ tại đơn vị", d:"15/02/26"},
            {id:"SO-10", cat:"SO", g:"QLKH", t:"Thông báo tiếp nhận hồ sơ đăng ký nhiệm vụ KHCN cấp tỉnh đợt 1/2026", d:"18/02/26"},
            {id:"SO-11", cat:"SO", g:"Văn phòng", t:"Tạo lập số quản lý văn bản đi, đến trong công tác văn thư trên hệ thống VBDH", d:"13/02/26"},
            {id:"SO-12", cat:"SO", g:"Văn phòng", t:"Tham gia thực hiện chế độ báo cáo trực Tết Nguyên đán 2026", d:"22/02/26"},
            {id:"SO-13", cat:"SO", g:"CN&ĐMST", t:"Tham mưu Kế hoạch của Ban Chỉ đạo về phát triển KHCN, ĐMST và CĐS", d:"24/02/26"},
            {id:"SO-14", cat:"SO", g:"Văn phòng", t:"Kế hoạch kiểm soát thủ tục hành chính, thực hiện cơ chế một cửa năm 2026", d:"26/02/26"},
            {id:"SO-15", cat:"SO", g:"TC-KH", t:"Phương án sắp xếp sở hữu, tài sản công nghiệp sau sắp xếp đơn vị", d:"28/02/26"},
            {id:"SO-16", cat:"SO", g:"Văn phòng", t:"Điều chỉnh, bổ sung Quy chế làm việc/Quyết định của Sở năm 2026", d:"31/03/26"},
            {id:"SO-17", cat:"SO", g:"CN&ĐMST", t:"Chỉ đạo nhà mạng tuyên truyền về phòng cháy chữa cháy trên các nền tảng số", d:"Thường xuyên"},
            {id:"SO-18", cat:"SO", g:"Văn phòng", t:"Báo cáo tổng hợp kết quả tự đánh giá chỉ số CCHC (PAR Index) năm 2025", d:"15/01/26"},
            {id:"SO-19", cat:"SO", g:"Văn phòng", t:"Thẩm định kế hoạch sử dụng kinh phí sự nghiệp KHCN của các huyện", d:"Thường xuyên"},
            {id:"SO-20", cat:"SO", g:"QLKH", t:"Kiểm tra tiến độ thực hiện các đề tài KHCN cấp tỉnh đang triển khai", d:"Hàng quý"},
            {id:"SO-21", cat:"SO", g:"Văn phòng", t:"Công tác quản lý cán bộ, công chức và đào tạo bồi dưỡng năm 2026", d:"Thường xuyên"},
            {id:"SO-22", cat:"SO", g:"Văn phòng", t:"Thực hiện công tác văn thư, lưu trữ và bảo mật hồ sơ tài liệu cơ quan", d:"Thường xuyên"},
            {id:"SO-23", cat:"SO", g:"Văn phòng", t:"Kiểm tra, đôn đốc việc thực hiện kỷ luật, kỷ cương hành chính (Thay Thanh tra)", d:"Thường xuyên"},
            {id:"SO-24", cat:"SO", g:"Văn phòng", t:"Quản lý tài sản công, mua sắm trang thiết bị làm việc của cơ quan", d:"Thường xuyên"},
            {id:"SO-25", cat:"SO", g:"Văn phòng", t:"Báo cáo tổng kết công tác Đảng và các đoàn thể năm 2026", d:"12/2026"},
            {id:"SO-26", cat:"SO", g:"TĐLCL", t:"Kiểm tra nhà nước về đo lường đối với các phương tiện đo nhóm 2 trên địa bàn", d:"Theo kế hoạch"},
            {id:"SO-27", cat:"SO", g:"TĐLCL", t:"Khảo sát chất lượng sản phẩm hàng hóa lưu thông trên thị trường tỉnh", d:"Hàng tháng"},
            {id:"SO-28", cat:"SO", g:"TĐLCL", t:"Hướng dẫn ghi nhãn hàng hóa và công bố tiêu chuẩn cơ sở cho doanh nghiệp", d:"Thường xuyên"},
            {id:"SO-29", cat:"SO", g:"TĐLCL", t:"Duy trì và cải tiến hệ thống quản lý chất lượng ISO 9001:2015", d:"Quý III/2026"},
            {id:"SO-30", cat:"SO", g:"QLKH", t:"Tổ chức họp Hội đồng tư vấn xác định nhiệm vụ KHCN đợt kế tiếp", d:"10/2026"},
            {id:"SO-31", cat:"SO", g:"QLKH", t:"Nghiệm thu các đề tài, dự án KHCN hoàn thành đúng tiến độ cam kết", d:"Thường xuyên"},
            {id:"SO-32", cat:"SO", g:"QLKH", t:"Quản lý hoạt động các tổ chức KHCN ngoài công lập và doanh nghiệp KHCN", d:"Thường xuyên"},
            {id:"SO-33", cat:"SO", g:"CN&ĐMST", t:"Hỗ trợ đăng ký bảo hộ nhãn hiệu tập thể cho các sản phẩm đặc thù", d:"Thường xuyên"},
            {id:"SO-34", cat:"SO", g:"CN&ĐMST", t:"Tổ chức ngày hội Khởi nghiệp đổi mới sáng tạo (Techfest) tỉnh Tây Ninh", d:"Quý IV/2026"},
            {id:"SO-35", cat:"SO", g:"CN&ĐMST", t:"Cấp giấy phép tiến hành công việc bức xạ cho các cơ sở y tế/công nghiệp", d:"Thường xuyên"},
            {id:"SO-36", cat:"SO", g:"CN&ĐMST", t:"Kiểm tra an toàn bức xạ và hạt nhân định kỳ tại các cơ sở kinh doanh", d:"Theo kế hoạch"},
            {id:"SO-37", cat:"SO", g:"TC-KH", t:"Quyết toán kinh phí hoạt động năm 2025 và xây dựng dự toán năm 2026", d:"Quý I/2026"},
            {id:"SO-38", cat:"SO", g:"TC-KH", t:"Tham mưu phân bổ kinh phí thực hiện các đề tài KHCN chuyển tiếp", d:"Quý I/2026"},
            {id:"SO-39", cat:"SO", g:"Văn phòng", t:"Tổng hợp báo cáo kết quả thực hiện dân vận chính quyền năm 2026", d:"30/11/26"},
            {id:"SO-40", cat:"SO", g:"Văn phòng", t:"Thực hiện thanh tra/kiểm tra nội bộ định kỳ tại các đơn vị trực thuộc", d:"Quý IV/2026"}
        ];

        let tasks = rawTasks;
        let currentCat = 'ALL';

        function switchMode(cat, el) {
            currentCat = cat;
            document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active-item'));
            el.classList.add('active-item');
            document.getElementById('currentCategoryLabel').innerText = 
                cat === 'ALL' ? 'TẤT CẢ' : 
                (cat === 'TU' ? 'TỈNH ỦY GIAO' : 
                (cat === 'UB' ? 'UBND TỈNH GIAO' : 
                (cat === 'NQ24' ? 'NGHỊ QUYẾT 24' : 'CHUYÊN MÔN SỞ')));
            render();
        }

        function render() {
            const search = document.getElementById('search').value.toLowerCase();
            const unit = document.getElementById('unit').value;

            const filtered = tasks.filter(t => {
                const matchSearch = t.t.toLowerCase().includes(search) || t.id.toLowerCase().includes(search);
                const matchUnit = unit === 'all' || t.g === unit;
                const matchCat = currentCat === 'ALL' || t.cat === currentCat;
                return matchSearch && matchUnit && matchCat;
            });

            const doneCount = filtered.filter(t => localStorage.getItem('ioc_v20_'+t.id) === "9. Đã hoàn thành").length;
            const percent = filtered.length ? Math.round((doneCount/filtered.length)*100) : 0;

            document.getElementById('stat-total').innerText = filtered.length;
            document.getElementById('stat-pending').innerText = filtered.length - doneCount;
            document.getElementById('stat-done').innerText = doneCount;
            document.getElementById('stat-percent').innerText = percent + "%";

            let html = "";
            filtered.forEach((t, i) => {
                const step = localStorage.getItem('ioc_v20_'+t.id) || steps[0];
                const isDone = step === "9. Đã hoàn thành";
                const colorIdx = i % 5;
                
                let tagColor = "bg-slate-100 text-slate-600";
                if(t.cat === 'TU') tagColor = "bg-rose-100 text-rose-700";
                if(t.cat === 'UB') tagColor = "bg-emerald-100 text-emerald-700";
                if(t.cat === 'NQ24') tagColor = "bg-purple-100 text-purple-700";

                html += `
                    <tr class="task-row row-color-${colorIdx}">
                        <td class="text-center font-bold opacity-30">${i+1}</td>
                        <td class="break-words">
                            <div class="font-bold leading-snug mb-0.5">${t.t}</div>
                            <div class="flex gap-2 items-center">
                                <span class="tag ${tagColor}">${t.cat}</span>
                                <span class="text-[8px] font-mono opacity-50">${t.id}</span>
                            </div>
                        </td>
                        <td class="text-[9px] font-bold uppercase opacity-60">${t.g}</td>
                        <td class="text-center font-bold opacity-70">${t.d}</td>
                        <td>
                            <select onchange="save('${t.id}', this.value)" 
                                    class="w-full border border-slate-200 rounded px-1 py-0.5 text-[8.8px] font-medium outline-none ${isDone ? 'bg-emerald-50 text-emerald-700' : 'bg-white text-slate-700'}">
                                ${steps.map(s => `<option value="${s}" ${step === s ? 'selected' : ''}>${s}</option>`).join('')}
                            </select>
                        </td>
                        <td class="text-center">
                            <span class="badge-step ${isDone ? 'badge-done' : 'badge-in-progress'}">
                                ${isDone ? 'HOÀN THÀNH' : 'ĐANG XỬ LÝ'}
                            </span>
                        </td>
                    </tr>
                `;
            });
            document.getElementById('taskTable').innerHTML = html;
        }

        function save(id, val) { 
            localStorage.setItem('ioc_v20_'+id, val); 
            render(); 
        }

        setInterval(() => { 
            document.getElementById('miniClock').innerText = new Date().toLocaleTimeString('vi-VN',{hour12:false}); 
        }, 1000);
        
        // Cập nhật danh sách đơn vị tham mưu duy nhất cho bộ lọc
        const units = [...new Set(rawTasks.map(t => t.g))].sort();
        const unitSelect = document.getElementById('unit');
        units.forEach(u => {
            const op = document.createElement('option'); 
            op.value = u; 
            op.innerText = u;
            unitSelect.appendChild(op);
        });

        document.getElementById('search').oninput = render;
        document.getElementById('unit').onchange = render;
        window.onload = render;
    </script>
</body>
</html>
