<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Theo dõi Chiến lược KH,CN</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
body { background:#0b132b; color:white; }
.card { background:#1c2541; }
.warning { background:#ff595e; }
.ok { background:#2ec4b6; }
.overdue { background:#ff006e; }
</style>
</head>

<body class="p-8">

<h1 class="text-3xl font-bold mb-6 text-yellow-300">
THEO DÕI THỰC HIỆN CHIẾN LƯỢC KH,CN & CHUYỂN ĐỔI SỐ
</h1>

<div class="mb-6 flex gap-6">
<div>
<label>Năm:</label>
<select id="yearFilter" class="text-black px-2 py-1"></select>
</div>

<div>
<label>Quý:</label>
<select id="quarterFilter" class="text-black px-2 py-1">
<option value="all">Tất cả</option>
<option value="1">Quý I</option>
<option value="2">Quý II</option>
<option value="3">Quý III</option>
<option value="4">Quý IV</option>
</select>
</div>
</div>

<div id="alertBox" class="hidden p-4 mb-6 font-bold text-black"></div>

<table class="w-full text-sm">
<thead class="bg-yellow-400 text-black">
<tr>
<th class="p-3">Trục chiến lược</th>
<th>Nhiệm vụ</th>
<th>Cơ quan</th>
<th>Thời hạn</th>
<th>Tiến độ</th>
<th>Trạng thái</th>
</tr>
</thead>
<tbody id="taskTable"></tbody>
</table>

<script>
const data = [

{ pillar:"Thể chế & Chính sách", task:"Hoàn thiện tiêu chuẩn, quy chuẩn phục vụ chuyển đổi số", agency:"Sở KH&CN", deadline:"2026-12-30", progress:0 },

{ pillar:"Thể chế & Chính sách", task:"Ban hành cơ chế hỗ trợ doanh nghiệp đổi mới công nghệ", agency:"UBND tỉnh", deadline:"2026-09-30", progress:0 },

{ pillar:"Doanh nghiệp & ĐMST", task:"Hỗ trợ doanh nghiệp triển khai ERP, CRM, chuyển đổi số", agency:"Sở KH&CN", deadline:"2028-12-30", progress:0 },

{ pillar:"Doanh nghiệp & ĐMST", task:"Hình thành hệ sinh thái khởi nghiệp đổi mới sáng tạo", agency:"Sở KH&CN", deadline:"2027-12-30", progress:0 },

{ pillar:"Ứng dụng công nghệ ngành", task:"Phát triển nông nghiệp công nghệ cao và chuỗi số hóa", agency:"Sở NN&PTNT", deadline:"2030-12-30", progress:0 },

{ pillar:"Ứng dụng công nghệ ngành", task:"Đổi mới dây chuyền sản xuất trong khu công nghiệp", agency:"BQL KCN", deadline:"2029-12-30", progress:0 },

{ pillar:"Hạ tầng số & Dữ liệu", task:"Xây dựng hệ thống dữ liệu nền và đo lường doanh nghiệp", agency:"Sở KH&CN", deadline:"2027-06-30", progress:0 },

{ pillar:"Hạ tầng số & Dữ liệu", task:"Phát triển hạ tầng số và nền tảng dùng chung", agency:"Sở TT&TT", deadline:"2028-12-30", progress:0 },

{ pillar:"Đầu tư công nghệ cao", task:"Thu hút FDI có chuyển giao công nghệ và R&D", agency:"Sở KH&ĐT", deadline:"2030-12-30", progress:0 }

];

function getQuarter(date){ return Math.floor(date.getMonth()/3)+1; }

function populateYear(){
const years=[...new Set(data.map(t=>new Date(t.deadline).getFullYear()))];
const select=document.getElementById("yearFilter");
years.forEach(y=>{
const opt=document.createElement("option");
opt.value=y; opt.text=y;
select.appendChild(opt);
});
}

function render(){
const year=document.getElementById("yearFilter").value;
const quarter=document.getElementById("quarterFilter").value;
const tbody=document.getElementById("taskTable");
const alertBox=document.getElementById("alertBox");

tbody.innerHTML="";
let warnings=[];

data.forEach(t=>{
const d=new Date(t.deadline);
if(d.getFullYear()!=year) return;
if(quarter!="all" && getQuarter(d)!=quarter) return;

const today=new Date();
const diff=(d-today)/(1000*60*60*24);

let status="Đang thực hiện";
let color="ok";

if(diff<30 && diff>0){ status="Sắp đến hạn"; color="warning"; warnings.push(t.task); }
if(diff<=0){ status="Quá hạn"; color="overdue"; }

tbody.innerHTML+=`
<tr class="card">
<td class="p-3">${t.pillar}</td>
<td>${t.task}</td>
<td>${t.agency}</td>
<td>${t.deadline}</td>
<td>${t.progress}%</td>
<td class="${color} text-center">${status}</td>
</tr>`;
});

if(warnings.length){
alertBox.classList.remove("hidden");
alertBox.classList.add("warning");
alertBox.innerText="⚠ Nhiệm vụ sắp đến hạn: "+warnings.join(", ");
}else{ alertBox.classList.add("hidden"); }
}

populateYear();
document.getElementById("yearFilter").onchange=render;
document.getElementById("quarterFilter").onchange=render;
render();
</script>

</body>
</html>
